---
title: "Curva Animada com Bezier"
description: "Destrinchando como a Curva Bézier funciona."
image: "/images/curva-animada.jpg"
alt: "Foto de Photo By: Kaboompics.com: https://www.pexels.com/pt-br/foto/matematica-educacao-instrucao-giz-6256066/"
tags: ["Matemática"]
date: "2025-01-28T00:00"
---

![Gif da curva](https://upload.wikimedia.org/wikipedia/commons/3/3d/B%C3%A9zier_2_big.gif)

## Antes de tudo..

Esse artigo é destinado a quem gosta de matemática e quem gosta de animação usando códigos. Caso você seja um programador e tenha curiosidade, recomendo olhar o código antes no final do artigo e depois voltar ao inicio e ir lendo com calma, assim acho que vai ficar mais interessante de ler.

## Parte matemática da coisa

A Curva de Bézier representa uma curva que vai se formando ao longo de um tempo, esse tempo é calculado usando porcentagem. Por exemplo, a curva vai ser formada em 5s, logo 0 representa 0% e 5 representa 100%.

> Na matemática porcentagem é melhor representada usando a forma decimal entre 0 e 1.
> 0.01 (1%), 0.02 (2%), ...0.20 (20%) ... 1 (100%).

Além da variante de tempo, a curva de Bézier precisa de 3 pontos para formar ela, o ponto inicial $A_0$, o ponto que define o arco da curva $A_1$, e o ponto que finaliza $A_2$. Esses pontos nesse exemplo vão ser pontos do eixo Y, não vamos considerar o eixo X. pois esse também vai se alterar ao longo do tempo. Vai ficar mais evidente no script em NodeJS ao final do artigo.

### Calculando $B_0$ e $B_1$

Com esses três pontos o próximo passo é achar os pontos $B_0$ e $B_1$, eles são pontos que vão se mover de acordo com o tempo $t$.

Por exemplo $B_0$, vai iniciar com o mesmo valor de $A_1$ e ao poucos vai indo até o valor de $A_2$. Ou seja, quando $t = 0$ vai ser igual a $A_0$, e quanto $t = 1$ vai ser igual a $A_1$.

A fórmula $B_0$ é a soma de dois produtos, o produto $(1 - t) A_{0}$ e o produto $tA_{1}$.

> Produto é a operação de multiplicação entre dois ou mais números.

$B_{0} = (1 - t) A_{0} + tA_{1}$

$A_0$ é o ponto inicial, se ele for um número tipo 2, a expressão $1 - t$ que vai multiplicar por ele vai começar sem mudar o valor, mas ao poucos vai reduzindo o valor de 2 até chegar a 0.

$t = 0; A_0 = 2$\
$(1 - t)A_0 = (1 - 0)*2 = 2$

$t = 0.5; A_0 = 2$\
$(1 - t)A_0 = (1 - 0.5)*2 = 0.5 * 2 = 1$

$t = 1; A_0 = 2$\
$(1 - t)A_0 = (1 - 1)*2 = 1 * 2 = 0$

Enquanto $tA_1$ aos poucos vai aumentando seu valor, começando de $0$ até chegar a $A_1$.

$t = 0; A_1 = 5$\
$t*A_1 = 0 * 5 = 0$

$t = 0.5; A_1 = 5$\
$t*A_1 = 0.5 * 5 = 2.5$

$t = 1; A_1 = 5$\
$t*A_1 = 1 * 5 = 5$

Agora juntando as duas equações pra achar tanto $B_0$ quanto $B_1$:

$t = 0; A_0 = 2; A_1 = 5; A_2 = 2$ \
$B_0 = (1 - t) * A_0 + tA_1 = (1 - 0) * 2 + 0 * 5  = 2$ \
$B_1 = (1 - t) * A_1 + tA_2 = (1 - 0) * 5 + 0 * 2 = 5$

$t = 0.4; A_0 = 2; A_1 = 5; A_2 = 2$ \
$B_0 = (1 - t) A_0 + tA_1 = (1 -0.4) * 2 + 0.4 * 5 = 0.6 * 2 + 2 = 1.2 + 2  = 3.2$ \
$B_1 = (1 - t) A_1 + tA_2 = (1 -0.4) * 5 + 0.4 * 2 = 0.6 * 5 + 0.8 = 3 + 0.8 = 3.8$

$t = 1; A_0 = 2; A_1 = 5; A_2 = 2$ \
$B_0 = (1 - t) A_0 + tA_1 = (1 - 1) * 2 + 1 * 5 = 0 + 5 = 5$ \
$B_1 = (1 - t) A_1 + tA_2 = (1 - 1) * 5 + 1 * 2 = 0 + 2 = 2$

Assim dá pra concluir que essa é um fórmula para mover tanto o ponto $B_0$ quanto o ponto $B_1$ de um ponto inicial ao um ponto final.

### Calculando C

O ponto $C$ vai representar a curva em si, e esse ponto vai ser formado usando os outros dois pontos $B_0$ e $B_1$. A fórmula vai ser a seguinte:

$C = (1 - t) B_{0} + tB_{1}$

Logo usando os exemplos anteriores de $B_0$ e $B_1$:

$t = 0; B_0 = 2; B_1 = 5$\
$C = (1 - t) B_{0} + tB_{1} = (1 - 0) * 2 + 0 * 5 = 2$

$t = 0.4; B_0 = 3.2; B_1 = 3.8$\
$C = (1 - t) B_{0} + tB_{1} = (1 - 0.4)*3.2 + 0.4 * 3.8 = 0.6 * 3.2 + 0.4 * 3.8 = 1.92 + 1.52 = 3.44$

$t = 1; B_0 = 5; B_1 = 2$\
$C = (1 - t) B_{0} + tB_{1} = (1 - 1) * 5 + 1 * 2 = 0 + 2 = 2$

Aqui dá pra ver que a curva começa sendo o mesmo ponto que $A_0$, vai aumentando até chegar no ponto $A_1$ e depois volta em direção ao ponto $A_2$.

### A Fórmula Completa

$t$ = tempo entre 0 e 1\
$A_{0}, A_{1}, A_{2}$ - pontos fixos\
$B_{0}, B_{1}$ - pontos que vão se mover\
$C$ - ponto que forma a curva de Bézier

$B_{0} = (1 - t) A_{0} + tA_{1}$\
$B_{1} = (1 - t) A_{1} + tA_{2}$\
$C = (1 - t) B_{0} + tB_{1}$

## Programando

No código abaixo está um trecho do que eu desenvolvi usando Javascript com Canvas API do navegador. Segue o link: [Benzier Line](https://codepen.io/dbasilioesp/pen/nbLWjP?editors=0010)

```js
// t vai aumentando a cada frame
let t = 0;

function drawLine() {
  // Os pontos de controle, P0, P1, P2
  const P0x = 30,
    P0y = 150,
    P1x = 175,
    P1y = 20,
    P2x = 350,
    P2y = 150;

  // Calcular C do eixo X
  const B0x = (1 - t) * P0x + t * P1x;
  const B1x = (1 - t) * P1x + t * P2x;
  const Cx = (1 - t) * B0x + t * B1x;

  // Calcular C do eixo Y
  const B0y = (1 - t) * P0y + t * P1y;
  const B1y = (1 - t) * P1y + t * P2y;
  const Cy = (1 - t) * B0y + t * B1y;

  ctx.lineTo(Cx, Cy);
  ctx.lineWidth = 2;
  ctx.strokeStyle = "#FFF";
  ctx.stroke();

  if (t < 1) t += 0.005;
}
```
